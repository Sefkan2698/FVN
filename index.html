<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>FVN Schiedsrichter-Bewertungsb√∂gen</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: Arial, sans-serif;
            background-color: #f5f5f5;
            padding: 20px;
        }
        
        .container {
            max-width: 800px;
            margin: 0 auto;
            background: white;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        
        .header {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 20px;
            margin-bottom: 30px;
        }
        
        .logo {
            height: 60px;
            width: 60px;
            background: #0066cc;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: bold;
            font-size: 20px;
        }
        
        .header-text {
            text-align: center;
            color: #0066cc;
            font-size: 18px;
            font-weight: bold;
            line-height: 1.3;
        }
        
        .selection-screen {
            text-align: center;
            padding: 40px 20px;
        }
        
        .selection-title {
            font-size: 24px;
            color: #333;
            margin-bottom: 30px;
        }
        
        .form-options {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 30px;
            margin-bottom: 30px;
        }
        
        .form-option {
            background: #f8f9fa;
            border: 2px solid #e9ecef;
            border-radius: 8px;
            padding: 30px 20px;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .form-option:hover {
            border-color: #0066cc;
            background: #e6f2ff;
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(0,102,204,0.2);
        }
        
        .form-option h3 {
            color: #0066cc;
            font-size: 18px;
            margin-bottom: 15px;
        }
        
        .form-option p {
            color: #666;
            line-height: 1.5;
        }
        
        .section {
            margin-bottom: 25px;
        }
        
        .section-title {
            background: #0066cc;
            color: white;
            padding: 10px;
            font-weight: bold;
            margin-bottom: 15px;
        }
        
        .form-row {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin-bottom: 12px;
        }
        
        .form-group {
            display: flex;
            align-items: center;
        }
        
        .form-group label {
            min-width: 150px;
            font-weight: bold;
            margin-right: 10px;
        }
        
        .form-group input, .form-group select, .form-group textarea {
            flex: 1;
            padding: 8px;
            border: 1px solid #ddd;
            border-radius: 4px;
        }
        
        .criteria-section {
            margin-bottom: 20px;
        }
        
        .criteria-header {
            background: #e6f2ff;
            padding: 8px;
            font-weight: bold;
            border-left: 4px solid #0066cc;
            margin-bottom: 10px;
        }
        
        .criteria-item {
            display: grid;
            grid-template-columns: 3fr 1fr 1fr 1fr;
            gap: 10px;
            align-items: center;
            padding: 8px 0;
            border-bottom: 1px solid #eee;
        }
        
        .criteria-item:last-child {
            border-bottom: none;
        }
        
        .criteria-label {
            font-weight: 500;
        }
        
        .radio-group {
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 10px;
            border-radius: 4px;
            transition: all 0.3s ease;
        }

        .radio-group.rating-1 {
            background-color: #ffebee;
            border: 2px solid #ffcdd2;
        }

        .radio-group.rating-1:hover,
        .radio-group.rating-1:has(input:checked) {
            background-color: #ffcdd2;
            border-color: #ef5350;
            box-shadow: 0 2px 8px rgba(239, 83, 80, 0.3);
        }

        .radio-group.rating-2 {
            background-color: #fff3e0;
            border: 2px solid #ffcc02;
        }

        .radio-group.rating-2:hover,
        .radio-group.rating-2:has(input:checked) {
            background-color: #ffe0b2;
            border-color: #ff9800;
            box-shadow: 0 2px 8px rgba(255, 152, 0, 0.3);
        }

        .radio-group.rating-3 {
            background-color: #e8f5e8;
            border: 2px solid #c8e6c9;
        }

        .radio-group.rating-3:hover,
        .radio-group.rating-3:has(input:checked) {
            background-color: #c8e6c9;
            border-color: #66bb6a;
            box-shadow: 0 2px 8px rgba(102, 187, 106, 0.3);
        }

        .radio-group input[type="radio"] {
            margin: 0 8px 0 0;
            transform: scale(1.3);
        }

        .radio-group label {
            margin-left: 8px;
            font-weight: bold;
            font-size: 16px;
        }
        
        .explanation {
            background: #fff9e6;
            border: 1px solid #ffe066;
            border-radius: 4px;
            padding: 15px;
            margin-bottom: 20px;
        }
        
        .explanation p {
            margin-bottom: 8px;
            color: #666;
        }
        
        .text-areas-section {
            margin-bottom: 20px;
        }
        
        .text-area-group {
            margin-bottom: 20px;
        }
        
        .text-area-group label {
            display: block;
            font-weight: bold;
            margin-bottom: 8px;
            color: #333;
        }
        
        .text-area-group textarea {
            width: 100%;
            min-height: 100px;
            padding: 10px;
            border: 1px solid #ddd;
            border-radius: 4px;
            resize: vertical;
            font-family: Arial, sans-serif;
        }
        
        .summary-section {
            display: grid;
            grid-template-columns: 2fr 1fr 1fr 1fr;
            gap: 15px;
            align-items: center;
            padding: 10px;
            background: #f8f9fa;
            border-radius: 4px;
            margin-bottom: 15px;
        }
        
        .summary-label {
            font-weight: bold;
        }
        
        .summary-input {
            text-align: center;
            padding: 8px;
            border: 1px solid #ddd;
            border-radius: 4px;
            font-weight: bold;
        }
        
        .submit-section {
            text-align: center;
            margin-top: 30px;
            padding: 20px;
            background: #f8f9fa;
            border-radius: 4px;
        }
        
        .submit-button, .back-button, .select-button {
            background: #28a745;
            color: white;
            padding: 12px 30px;
            border: none;
            border-radius: 4px;
            font-size: 16px;
            cursor: pointer;
            transition: background 0.3s;
            margin: 0 10px;
        }
        
        .submit-button:hover {
            background: #218838;
        }
        
        .back-button {
            background: #6c757d;
        }
        
        .back-button:hover {
            background: #5a6268;
        }
        
        .select-button {
            background: #0066cc;
            width: 100%;
            margin: 10px 0;
        }
        
        .select-button:hover {
            background: #0052a3;
        }
        
        .hidden {
            display: none;
        }
        
        .invalid-input {
            border-color: #dc3545 !important;
            background-color: #f8d7da;
        }
        
        .error-text {
            color: #dc3545;
            font-size: 12px;
            margin-top: 4px;
        }
        
        .success-message {
            background: #d4edda;
            color: #155724;
            padding: 15px;
            border-radius: 4px;
            margin: 20px 0;
            text-align: center;
        }
        
        .loading {
            display: inline-block;
            width: 20px;
            height: 20px;
            border: 3px solid #f3f3f3;
            border-top: 3px solid #3498db;
            border-radius: 50%;
            animation: spin 1s linear infinite;
            margin-right: 10px;
        }
        
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        /* Simplified form styles for second form */
        .simple-criteria-grid {
            display: grid;
            grid-template-columns: 2fr 1fr 1fr 1fr;
            gap: 10px;
            align-items: center;
            padding: 8px;
            border-bottom: 1px solid #eee;
        }

        .simple-criteria-grid:first-child {
            background: #f8f9fa;
            font-weight: bold;
        }

        .recommendation-section {
            display: grid;
            grid-template-columns: 2fr 1fr;
            gap: 15px;
            align-items: center;
            padding: 10px;
            background: #f8f9fa;
            border-radius: 4px;
            margin-bottom: 10px;
        }

        .checkbox-group {
            display: flex;
            justify-content: center;
            align-items: center;
        }

        .checkbox-group input[type="checkbox"] {
            transform: scale(1.3);
        }
    </style>
</head>
<body>
    <!-- Selection Screen -->
    <div id="selectionScreen" class="container">
        <div class="header">
           <img src="assets/fvn-logo.png" alt="FVN Logo" class="logo">
            <div class="header-text">
                FVN - Schiedsrichter<br>
                Bewertungsb√∂gen
            </div>
        </div>
        
        <div class="selection-screen">
            <h2 class="selection-title">Bitte w√§hlen Sie den gew√ºnschten Bewertungsbogen:</h2>
            
            <div class="form-options">
                <div class="form-option" onclick="showForm('beobachtung')">
                    <h3>Beobachtungsbogen</h3>
                    <p>A- und B-Junioren-Niederrheinliga<br>
                    Detaillierte Bewertung mit 15 Kriterien in 6 Kategorien</p>
                    <button class="select-button">Ausw√§hlen</button>
                </div>
                
                <div class="form-option" onclick="showForm('scouting')">
                    <h3>Scoutingbogen</h3>
                    <p>Vereinfachte Bewertung mit 6 Hauptkriterien<br>
                    F√ºr Scouting und erste Beurteilungen</p>
                    <button class="select-button">Ausw√§hlen</button>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Beobachtungsbogen Form -->
    <div id="beobachtungsForm" class="container hidden">
        <div class="header">
           <img src="assets/fvn-logo.png" alt="FVN Logo" class="logo">
            <div class="header-text">
                FVN - Schiedsrichter<br>
                Beobachtungsbogen A- und B-Junioren-Niederrheinliga
            </div>
        </div>
        
        <form id="observationForm" onsubmit="return submitBeobachtungsForm(event)">
            <!-- Informationen zur Beobachtung -->
            <div class="section">
                <div class="section-title">Informationen zur Beobachtung</div>
                
                <div class="form-row">
                    <div class="form-group">
                        <label>Beobachter:</label>
                        <input type="text" name="observer" required>
                    </div>
                    <div class="form-group">
                        <label>Datum:</label>
                        <input type="date" name="date" required>
                    </div>
                </div>
                
                <div class="form-row">
                    <div class="form-group">
                        <label>Begegnung:</label>
                        <input type="text" name="match" required placeholder="Verein A - Verein B">
                    </div>
                    <div class="form-group">
                        <label>Spielklasse:</label>
                        <select name="league" required>
                            <option value="">Bitte w√§hlen</option>
                            <option value="A-NRL">A-NRL</option>
                            <option value="B-NRL">B-NRL</option>
                        </select>
                    </div>
                </div>
                
                <div class="form-row">
                    <div class="form-group">
                        <label>Schiedsrichter:</label>
                        <input type="text" name="referee" required>
                    </div>
                    <div class="form-group">
                        <label>Halbzeitstand:</label>
                        <input type="text" name="halftime" required placeholder="x:y" pattern="^\d+:\d+$" title="Format: x:y (z.B. 1:2)">
                    </div>
                </div>
                
                <div class="form-row">
                    <div class="form-group">
                        <label>Assistent 1:</label>
                        <input type="text" name="assistant1" required>
                    </div>
                    <div class="form-group">
                        <label>Endstand:</label>
                        <input type="text" name="fulltime" required placeholder="x:y" pattern="^\d+:\d+$" title="Format: x:y (z.B. 2:4)">
                    </div>
                </div>
                
                <div class="form-row">
                    <div class="form-group">
                        <label>Assistent 2:</label>
                        <input type="text" name="assistant2" required>
                    </div>
                    <div class="form-group">
                        <label>Kader:</label>
                        <select name="squad" required>
                            <option value="">Bitte w√§hlen</option>
                            <option value="U18">U18</option>
                            <option value="U20">U20</option>
                        </select>
                    </div>
                </div>
            </div>
            
            <!-- Erl√§uterung -->
            <div class="section">
                <div class="section-title">Erl√§uterung</div>
                <div class="explanation">
                   <p><strong style="background-color: #ffcdd2; padding: 2px 6px; border-radius: 3px;">1</strong> = Optimierungsbedarf (nicht zufrieden stellend)</p>
                    <p><strong style="background-color: #ffe0b2; padding: 2px 6px; border-radius: 3px;">2</strong> = Entspricht den Anforderungen (keine Relevanz/Neutrale Bewertung)</p>
                    <p><strong style="background-color: #c8e6c9; padding: 2px 6px; border-radius: 3px;">3</strong> = √úberdurchschnittliche Anforderung (mehr als zufrieden stellend)</p>
                    <br>
                    <p><strong>In jeder Zeile kann nur eine der drei M√∂glichkeiten gew√§hlt werden!</strong></p>
                    <p><strong>Wird die Zahl 1 oder 3 gew√§hlt, ist im Kommentarfeld eine kurze, konkrete Begr√ºndung erforderlich.</strong></p>
                </div>
            </div>
            
            <!-- Beobachtungskriterien -->
            <div class="section">
                <div class="section-title">Beobachtungskriterien</div>
                
                <!-- 1. Spielverst√§ndnis -->
                <div class="criteria-section">
                    <div class="criteria-header">1. Spielverst√§ndnis</div>
                    <div class="criteria-item">
                        <div class="criteria-label">1.1 Erkennen des Spielcharakters / von Spielphasen</div>
                        <div class="radio-group rating-1">
                            <input type="radio" name="criteria_1_1" value="1" required>
                            <label>1</label>
                        </div>
                        <div class="radio-group rating-2">
                            <input type="radio" name="criteria_1_1" value="2" required>
                            <label>2</label>
                        </div>
                        <div class="radio-group rating-3">
                            <input type="radio" name="criteria_1_1" value="3" required>
                            <label>3</label>
                        </div>
                    </div>
                    <div class="criteria-item">
                        <div class="criteria-label">1.2 Regelkonformit√§t / Regelverst√∂√üe</div>
                        <div class="radio-group rating-1">
                            <input type="radio" name="criteria_1_2" value="1" required>
                            <label>1</label>
                        </div>
                        <div class="radio-group rating-2">
                            <input type="radio" name="criteria_1_2" value="2" required>
                            <label>2</label>
                        </div>
                        <div class="radio-group rating-3">
                            <input type="radio" name="criteria_1_2" value="3" required>
                            <label>3</label>
                        </div>
                    </div>
                </div>
                
                <!-- 2. Zweikampfbeurteilung -->
                <div class="criteria-section">
                    <div class="criteria-header">2. Zweikampfbeurteilung</div>
                    <div class="criteria-item">
                        <div class="criteria-label">2.1 Fu√üvergehen</div>
                        <div class="radio-group rating-1">
                            <input type="radio" name="criteria_2_1" value="1" required>
                            <label>1</label>
                        </div>
                        <div class="radio-group rating-2">
                            <input type="radio" name="criteria_2_1" value="2" required>
                            <label>2</label>
                        </div>
                        <div class="radio-group rating-3">
                            <input type="radio" name="criteria_2_1" value="3" required>
                            <label>3</label>
                        </div>
                    </div>
                    <div class="criteria-item">
                        <div class="criteria-label">2.2 Oberk√∂rpervergehen</div>
                        <div class="radio-group rating-1">
                            <input type="radio" name="criteria_2_2" value="1" required>
                            <label>1</label>
                        </div>
                        <div class="radio-group rating-2">
                            <input type="radio" name="criteria_2_2" value="2" required>
                            <label>2</label>
                        </div>
                        <div class="radio-group rating-3">
                            <input type="radio" name="criteria_2_2" value="3" required>
                            <label>3</label>
                        </div>
                    </div>
                </div>
                
                <!-- 3. Disziplinarkontrolle -->
                <div class="criteria-section">
                    <div class="criteria-header">3. Disziplinarkontrolle</div>
                    <div class="criteria-item">
                        <div class="criteria-label">3.1 Ansprachen / Ermahnungen</div>
                        <div class="radio-group rating-1">
                            <input type="radio" name="criteria_3_1" value="1" required>
                            <label>1</label>
                        </div>
                        <div class="radio-group rating-2">
                            <input type="radio" name="criteria_3_1" value="2" required>
                            <label>2</label>
                        </div>
                        <div class="radio-group rating-3">
                            <input type="radio" name="criteria_3_1" value="3" required>
                            <label>3</label>
                        </div>
                    </div>
                    <div class="criteria-item">
                        <div class="criteria-label">3.2 Verwarnungen</div>
                        <div class="radio-group rating-1">
                            <input type="radio" name="criteria_3_2" value="1" required>
                            <label>1</label>
                        </div>
                        <div class="radio-group rating-2">
                            <input type="radio" name="criteria_3_2" value="2" required>
                            <label>2</label>
                        </div>
                        <div class="radio-group rating-3">
                            <input type="radio" name="criteria_3_2" value="3" required>
                            <label>3</label>
                        </div>
                    </div>
                    <div class="criteria-item">
                        <div class="criteria-label">3.3 Feldverweise</div>
                        <div class="radio-group rating-1">
                            <input type="radio" name="criteria_3_3" value="1" required>
                            <label>1</label>
                        </div>
                        <div class="radio-group rating-2">
                            <input type="radio" name="criteria_3_3" value="2" required>
                            <label>2</label>
                        </div>
                        <div class="radio-group rating-3">
                            <input type="radio" name="criteria_3_3" value="3" required>
                            <label>3</label>
                        </div>
                    </div>
                </div>
                
                <!-- 4. Pers√∂nliches Auftreten -->
                <div class="criteria-section">
                    <div class="criteria-header">4. Pers√∂nliches Auftreten</div>
                    <div class="criteria-item">
                        <div class="criteria-label">4.1 Akzeptanz / Pers√∂nlichkeit</div>
                        <div class="radio-group rating-1">
                            <input type="radio" name="criteria_4_1" value="1" required>
                            <label>1</label>
                        </div>
                        <div class="radio-group rating-2">
                            <input type="radio" name="criteria_4_1" value="2" required>
                            <label>2</label>
                        </div>
                        <div class="radio-group rating-3">
                            <input type="radio" name="criteria_4_1" value="3" required>
                            <label>3</label>
                        </div>
                    </div>
                    <div class="criteria-item">
                        <div class="criteria-label">4.2 Durchsetzungsverm√∂gen</div>
                        <div class="radio-group rating-1">
                            <input type="radio" name="criteria_4_2" value="1" required>
                            <label>1</label>
                        </div>
                        <div class="radio-group rating-2">
                            <input type="radio" name="criteria_4_2" value="2" required>
                            <label>2</label>
                        </div>
                        <div class="radio-group rating-3">
                            <input type="radio" name="criteria_4_2" value="3" required>
                            <label>3</label>
                        </div>
                    </div>
                    <div class="criteria-item">
                        <div class="criteria-label">4.3 Kommunikation (Ansprache, Dialog)</div>
                        <div class="radio-group rating-1">
                            <input type="radio" name="criteria_4_3" value="1" required>
                            <label>1</label>
                        </div>
                        <div class="radio-group rating-2">
                            <input type="radio" name="criteria_4_3" value="2" required>
                            <label>2</label>
                        </div>
                        <div class="radio-group rating-3">
                            <input type="radio" name="criteria_4_3" value="3" required>
                            <label>3</label>
                        </div>
                    </div>
                    <div class="criteria-item">
                        <div class="criteria-label">4.4 Pr√§sentation (Gestik, Mimik, Pfiffe)</div>
                        <div class="radio-group rating-1">
                            <input type="radio" name="criteria_4_4" value="1" required>
                            <label>1</label>
                        </div>
                        <div class="radio-group rating-2">
                            <input type="radio" name="criteria_4_4" value="2" required>
                            <label>2</label>
                        </div>
                        <div class="radio-group rating-3">
                            <input type="radio" name="criteria_4_4" value="3" required>
                            <label>3</label>
                        </div>
                    </div>
                </div>
                
                <!-- 5. Fitness und Stellungsspiel -->
                <div class="criteria-section">
                    <div class="criteria-header">5. Fitness und Stellungsspiel</div>
                    <div class="criteria-item">
                        <div class="criteria-label">5.1 Laufverm√∂gen</div>
                        <div class="radio-group rating-1">
                            <input type="radio" name="criteria_5_1" value="1" required>
                            <label>1</label>
                        </div>
                        <div class="radio-group rating-2">
                            <input type="radio" name="criteria_5_1" value="2" required>
                            <label>2</label>
                        </div>
                        <div class="radio-group rating-3">
                            <input type="radio" name="criteria_5_1" value="3" required>
                            <label>3</label>
                        </div>
                    </div>
                    <div class="criteria-item">
                        <div class="criteria-label">5.2 Einblick und Positionierung laufendes Spiel</div>
                        <div class="radio-group rating-1">
                            <input type="radio" name="criteria_5_2" value="1" required>
                            <label>1</label>
                        </div>
                        <div class="radio-group rating-2">
                            <input type="radio" name="criteria_5_2" value="2" required>
                            <label>2</label>
                        </div>
                        <div class="radio-group rating-3">
                            <input type="radio" name="criteria_5_2" value="3" required>
                            <label>3</label>
                        </div>
                    </div>
                    <div class="criteria-item">
                        <div class="criteria-label">5.3 Einblick und Positionierung Spielfortsetzungen</div>
                        <div class="radio-group rating-1">
                            <input type="radio" name="criteria_5_3" value="1" required>
                            <label>1</label>
                        </div>
                        <div class="radio-group rating-2">
                            <input type="radio" name="criteria_5_3" value="2" required>
                            <label>2</label>
                        </div>
                        <div class="radio-group rating-3">
                            <input type="radio" name="criteria_5_3" value="3" required>
                            <label>3</label>
                        </div>
                    </div>
                </div>
                
                <!-- 6. Teamarbeit -->
                <div class="criteria-section">
                    <div class="criteria-header">6. Teamarbeit</div>
                    <div class="criteria-item">
                        <div class="criteria-label">6.1 Zusammenarbeit</div>
                        <div class="radio-group rating-1">
                            <input type="radio" name="criteria_6_1" value="1" required>
                            <label>1</label>
                        </div>
                        <div class="radio-group rating-2">
                            <input type="radio" name="criteria_6_1" value="2" required>
                            <label>2</label>
                        </div>
                        <div class="radio-group rating-3">
                            <input type="radio" name="criteria_6_1" value="3" required>
                            <label>3</label>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Erl√§uterung der Schiedsrichterleistung -->
            <div class="section">
                <div class="section-title">Erl√§uterung der Schiedsrichterleistung</div>
                
                <div class="text-areas-section">
                    <div class="text-area-group">
                        <label>Positive Erkenntnisse:</label>
                        <textarea name="positive_notes" placeholder="Beschreiben Sie positive Aspekte der Schiedsrichterleistung..."></textarea>
                    </div>
                    
                    <div class="text-area-group">
                        <label>Zu optimierende Bereiche:</label>
                        <textarea name="improvement_notes" placeholder="Beschreiben Sie Bereiche, die optimiert werden k√∂nnen..."></textarea>
                    </div>
                </div>
            </div>
            
            <!-- Beurteilung der Gesamtleistung -->
            <div class="section">
                <div class="section-title">Beurteilung der Gesamtleistung</div>
                
                <div class="summary-section">
                    <div class="summary-label">Anzahl Bewertungen "1" (Optimierungsbedarf):</div>
                    <div class="summary-input" id="count1">0</div>
                    <div class="summary-label">Punkte (x1):</div>
                    <div class="summary-input" id="points1">0</div>
                </div>

                <div class="summary-section">
                    <div class="summary-label">Anzahl Bewertungen "2" (Entspricht Anforderungen):</div>
                    <div class="summary-input" id="count2">0</div>
                    <div class="summary-label">Punkte (x2):</div>
                    <div class="summary-input" id="points2">0</div>
                </div>
                
                <div class="summary-section">
                    <div class="summary-label">Anzahl Bewertungen "3" (√úberdurchschnittlich):</div>
                    <div class="summary-input" id="count3">0</div>
                    <div class="summary-label">Punkte (x3):</div>
                    <div class="summary-input" id="points3">0</div>
                </div>
                
                <div class="summary-section">
                    <div class="summary-label"><strong>Gesamtpunktzahl:</strong></div>
                    <div class="summary-input" id="totalPoints" style="background: #e6f2ff; font-size: 18px;"><strong>0</strong></div>
                    <div></div>
                    <div></div>
                </div>
            </div>
            
            <!-- Submit Section -->
            <div class="submit-section">
                <button type="button" class="back-button" onclick="showSelection()">Zur√ºck zur Auswahl</button>
                <button type="submit" class="submit-button">PDF herunterladen</button>
                <div id="successMessage" class="success-message" style="display: none;"></div>
            </div>
        </form>
    </div>
    
    <!-- Scouting Form -->
    <div id="scoutingForm" class="container hidden">
        <div class="header">
           <img src="assets/fvn-logo.png" alt="FVN Logo" class="logo">
            <div class="header-text">
                FVN - Schiedsrichter<br>
                Scoutingbogen
            </div>
        </div>
        
        <form id="scoutForm" onsubmit="return submitScoutingForm(event)">
            <!-- Informationen zum Scouting -->
            <div class="section">
                <div class="section-title">Informationen zum Scouting</div>
                
                <div class="form-row">
                    <div class="form-group">
                        <label>Scout:</label>
                        <input type="text" name="scout" required>
                    </div>
                    <div class="form-group">
                        <label>Datum:</label>
                        <input type="date" name="date" required>
                    </div>
                </div>
                
                <div class="form-row">
                    <div class="form-group">
                        <label>Begegnung:</label>
                        <input type="text" name="match" required placeholder="Verein A - Verein B">
                    </div>
                    <div class="form-group">
                        <label>Spielklasse:</label>
                        <input type="text" name="league" required>
                    </div>
                </div>
                
                <div class="form-row">
                    <div class="form-group">
                        <label>Schiedsrichter:</label>
                        <input type="text" name="referee" required>
                    </div>
                    <div class="form-group">
                        <label>Halbzeitstand:</label>
                        <input type="text" name="halftime" required placeholder="x:y" pattern="^\d+:\d+$" title="Format: x:y (z.B. 1:2)">
                    </div>
                </div>
                
                <div class="form-row">
                    <div class="form-group">
                        <label>Assistent 1:</label>
                        <input type="text" name="assistant1" required>
                    </div>
                    <div class="form-group">
                        <label>Endstand:</label>
                        <input type="text" name="fulltime" required placeholder="x:y" pattern="^\d+:\d+$" title="Format: x:y (z.B. 2:4)">
                    </div>
                </div>
                
                <div class="form-row">
                    <div class="form-group">
                        <label>Assistent 2:</label>
                        <input type="text" name="assistant2" required>
                    </div>
                    <div class="form-group">
                        <label>Kader:</label>
                        <input type="text" name="squad" required>
                    </div>
                </div>
            </div>
            
            <!-- Erl√§uterung -->
            <div class="section">
                <div class="section-title">Erl√§uterung</div>
                <div class="explanation">
                    <p><strong style="background-color: #ffcdd2; padding: 2px 6px; border-radius: 3px;">1</strong> = Optimierungsbedarf (nicht zufrieden stellend)</p>
                    <p><strong style="background-color: #ffe0b2; padding: 2px 6px; border-radius: 3px;">2</strong> = Entspricht den Anforderungen (keine Relevanz/Neutrale Bewertung)</p>
                    <p><strong style="background-color: #c8e6c9; padding: 2px 6px; border-radius: 3px;">3</strong> = √úberdurchschnittliche Anforderung (mehr als zufrieden stellend)</p>
                    <br>
                    <p><strong>In jeder Zeile nur eine der drei M√∂glichkeiten w√§hlen!</strong></p>
                </div>
            </div>
            
            <!-- Scoutingkriterien -->
            <!-- Scoutingkriterien -->
<div class="section">
    <div class="section-title">Scoutingkriterium</div>
    
    <div class="criteria-section">
        <div class="criteria-item">
            <div class="criteria-label">Spielverst√§ndnis</div>
            <div class="radio-group rating-1">
                <input type="radio" name="scout_criteria_1" value="1" required>
                <label>1</label>
            </div>
            <div class="radio-group rating-2">
                <input type="radio" name="scout_criteria_1" value="2" required>
                <label>2</label>
            </div>
            <div class="radio-group rating-3">
                <input type="radio" name="scout_criteria_1" value="3" required>
                <label>3</label>
            </div>
        </div>
        
        <div class="criteria-item">
            <div class="criteria-label">Zweikampfbeurteilung</div>
            <div class="radio-group rating-1">
                <input type="radio" name="scout_criteria_2" value="1" required>
                <label>1</label>
            </div>
            <div class="radio-group rating-2">
                <input type="radio" name="scout_criteria_2" value="2" required>
                <label>2</label>
            </div>
            <div class="radio-group rating-3">
                <input type="radio" name="scout_criteria_2" value="3" required>
                <label>3</label>
            </div>
        </div>
        
        <div class="criteria-item">
            <div class="criteria-label">Disziplinarkontrolle</div>
            <div class="radio-group rating-1">
                <input type="radio" name="scout_criteria_3" value="1" required>
                <label>1</label>
            </div>
            <div class="radio-group rating-2">
                <input type="radio" name="scout_criteria_3" value="2" required>
                <label>2</label>
            </div>
            <div class="radio-group rating-3">
                <input type="radio" name="scout_criteria_3" value="3" required>
                <label>3</label>
            </div>
        </div>
        
        <div class="criteria-item">
            <div class="criteria-label">Pers√∂nliches Auftreten</div>
            <div class="radio-group rating-1">
                <input type="radio" name="scout_criteria_4" value="1" required>
                <label>1</label>
            </div>
            <div class="radio-group rating-2">
                <input type="radio" name="scout_criteria_4" value="2" required>
                <label>2</label>
            </div>
            <div class="radio-group rating-3">
                <input type="radio" name="scout_criteria_4" value="3" required>
                <label>3</label>
            </div>
        </div>
        
        <div class="criteria-item">
            <div class="criteria-label">Fitness und Stellungsspiel</div>
            <div class="radio-group rating-1">
                <input type="radio" name="scout_criteria_5" value="1" required>
                <label>1</label>
            </div>
            <div class="radio-group rating-2">
                <input type="radio" name="scout_criteria_5" value="2" required>
                <label>2</label>
            </div>
            <div class="radio-group rating-3">
                <input type="radio" name="scout_criteria_5" value="3" required>
                <label>3</label>
            </div>
        </div>
        
        <div class="criteria-item">
            <div class="criteria-label">Teamarbeit</div>
            <div class="radio-group rating-1">
                <input type="radio" name="scout_criteria_6" value="1" required>
                <label>1</label>
            </div>
            <div class="radio-group rating-2">
                <input type="radio" name="scout_criteria_6" value="2" required>
                <label>2</label>
            </div>
            <div class="radio-group rating-3">
                <input type="radio" name="scout_criteria_6" value="3" required>
                <label>3</label>
            </div>
        </div>
    </div>
</div>
            <div class="section">
                <div class="section-title">Kurzes Fazit zur Schiedsrichterleistung</div>
                
                <div class="text-areas-section">
                    <div class="text-area-group">
                        <label>Positive Erkenntnisse:</label>
                        <textarea name="positive_notes" placeholder="Beschreiben Sie positive Aspekte..."></textarea>
                    </div>
                    
                    <div class="text-area-group">
                        <label>Zu optimierende Bereiche:</label>
                        <textarea name="improvement_notes" placeholder="Beschreiben Sie Bereiche, die optimiert werden k√∂nnen..."></textarea>
                    </div>
                </div>
            </div>
            <!-- Beurteilung der Gesamtleistung -->
            <div class="section">
                <div class="section-title">Beurteilung der Gesamtleistung</div>
                <div class="explanation" style="margin-bottom: 20px;">
                    <p><strong>(Nur eine der drei M√∂glichkeiten w√§hlen)</strong></p>
                </div>
                
                <div class="recommendation-section">
                    <div class="summary-label">Empfehlung f√ºr weitere F√∂rderma√ünahmen</div>
                    <div class="checkbox-group">
                        <input type="checkbox" name="recommendation_1" value="foerderung">
                    </div>
                </div>
                
                <div class="recommendation-section">
                    <div class="summary-label">Weitere Beobachtungen notwendig</div>
                    <div class="checkbox-group">
                        <input type="checkbox" name="recommendation_2" value="beobachtung">
                    </div>
                </div>
                
                <div class="recommendation-section">
                    <div class="summary-label">Weiterentwicklung abwarten</div>
                    <div class="checkbox-group">
                        <input type="checkbox" name="recommendation_3" value="abwarten">
                    </div>
                </div>
            </div>
            
            <!-- Submit Section -->
            <div class="submit-section">
                <button type="button" class="back-button" onclick="showSelection()">Zur√ºck zur Auswahl</button>
                <button type="submit" class="submit-button">PDF herunterladen</button>
                <div id="scoutSuccessMessage" class="success-message" style="display: none;"></div>
            </div>
        </form>
    </div>

    <script>
        let currentForm = null;

        function showSelection() {
            document.getElementById('selectionScreen').classList.remove('hidden');
            document.getElementById('beobachtungsForm').classList.add('hidden');
            document.getElementById('scoutingForm').classList.add('hidden');
            currentForm = null;
        }

        function showForm(formType) {
            document.getElementById('selectionScreen').classList.add('hidden');
            
            if (formType === 'beobachtung') {
                document.getElementById('beobachtungsForm').classList.remove('hidden');
                document.getElementById('scoutingForm').classList.add('hidden');
                currentForm = 'beobachtung';
                initializeBeobachtungsForm();
            } else if (formType === 'scouting') {
                document.getElementById('scoutingForm').classList.remove('hidden');
                document.getElementById('beobachtungsForm').classList.add('hidden');
                currentForm = 'scouting';
                initializeScoutingForm();
            }
        }

        function initializeBeobachtungsForm() {
            // Set today's date as default
            const today = new Date().toISOString().split('T')[0];
            document.querySelector('#beobachtungsForm input[name="date"]').value = today;
            
            // Add event listeners for score calculation
            const criteriaRadios = document.querySelectorAll('#beobachtungsForm input[type="radio"][name^="criteria_"]');
            criteriaRadios.forEach(radio => {
                radio.addEventListener('change', calculateBeobachtungsScores);
            });
            
            // Add validation for score format
            const scoreInputs = document.querySelectorAll('#beobachtungsForm input[name="halftime"], #beobachtungsForm input[name="fulltime"]');
            scoreInputs.forEach(input => {
                input.addEventListener('input', validateScoreFormat);
            });
        }

        function initializeScoutingForm() {
            // Set today's date as default
            const today = new Date().toISOString().split('T')[0];
            document.querySelector('#scoutingForm input[name="date"]').value = today;
            
            // Add validation for score format
            const scoreInputs = document.querySelectorAll('#scoutingForm input[name="halftime"], #scoutingForm input[name="fulltime"]');
            scoreInputs.forEach(input => {
                input.addEventListener('input', validateScoreFormat);
            });

            // Add event listeners for checkbox validation (only one should be selected)
            const checkboxes = document.querySelectorAll('#scoutingForm input[type="checkbox"][name^="recommendation_"]');
            checkboxes.forEach(checkbox => {
                checkbox.addEventListener('change', function() {
                    if (this.checked) {
                        checkboxes.forEach(cb => {
                            if (cb !== this) cb.checked = false;
                        });
                    }
                });
            });
        }

        function validateScoreFormat(event) {
            const input = event.target;
            const value = input.value;
            const pattern = /^\d+:\d+$/;
            
            if (value && !pattern.test(value)) {
                input.classList.add('invalid-input');
                if (!input.nextElementSibling || !input.nextElementSibling.classList.contains('error-text')) {
                    const errorSpan = document.createElement('span');
                    errorSpan.className = 'error-text';
                    errorSpan.textContent = 'Format: x:y (z.B. 1:2)';
                    input.parentNode.appendChild(errorSpan);
                }
            } else {
                input.classList.remove('invalid-input');
                const errorSpan = input.parentNode.querySelector('.error-text');
                if (errorSpan) {
                    errorSpan.remove();
                }
            }
        }

        function calculateBeobachtungsScores() {
            const criteriaRadios = document.querySelectorAll('#beobachtungsForm input[type="radio"][name^="criteria_"]:checked');
            let counts = { '1': 0, '2': 0, '3': 0 };
            
            criteriaRadios.forEach(radio => {
                counts[radio.value]++;
            });
            
            // Update counts
            document.getElementById('count1').textContent = counts['1'];
            document.getElementById('count2').textContent = counts['2'];  
            document.getElementById('count3').textContent = counts['3'];
            
            // Calculate weighted scores
            const points1 = counts['1'] * 1;
            const points2 = counts['2'] * 2;
            const points3 = counts['3'] * 3;
            
            document.getElementById('points1').textContent = points1;
            document.getElementById('points2').textContent = points2;
            document.getElementById('points3').textContent = points3;
            
            const totalPoints = points1 + points2 + points3;
            document.getElementById('totalPoints').innerHTML = `<strong>${totalPoints}</strong>`;
        }

        function submitBeobachtungsForm(event) {
            event.preventDefault();
            
            const form = document.getElementById('observationForm');
            
            if (!validateBeobachtungsForm(form)) {
                return false;
            }
            
            // Generate and download PDF content
            const formData = collectBeobachtungsFormData(form);
            const pdfContent = generateBeobachtungsPDF(formData);
            downloadPDFContent(pdfContent, 'Beobachtungsbogen', formData.date, formData.referee);
            
            document.getElementById('successMessage').textContent = 'PDF wurde erfolgreich heruntergeladen!';
            document.getElementById('successMessage').style.display = 'block';
            
            return false;
        }

        function submitScoutingForm(event) {
            event.preventDefault();
            
            const form = document.getElementById('scoutForm');
            
            if (!validateScoutingForm(form)) {
                return false;
            }
            
            // Generate and download PDF content
            const formData = collectScoutingFormData(form);
            const pdfContent = generateScoutingPDF(formData);
            downloadPDFContent(pdfContent, 'Scoutingbogen', formData.date, formData.referee);
            
            document.getElementById('scoutSuccessMessage').textContent = 'PDF wurde erfolgreich heruntergeladen!';
            document.getElementById('scoutSuccessMessage').style.display = 'block';
            
            return false;
        }

        function validateBeobachtungsForm(form) {
            const requiredFields = form.querySelectorAll('[required]');
            let isValid = true;
            
            requiredFields.forEach(field => {
                if (!field.value || (field.type === 'radio' && !form.querySelector(`input[name="${field.name}"]:checked`))) {
                    field.classList.add('invalid-input');
                    isValid = false;
                } else {
                    field.classList.remove('invalid-input');
                }
            });
            
            // Validate score format
            const scoreFields = ['halftime', 'fulltime'];
            scoreFields.forEach(fieldName => {
                const field = form.querySelector(`input[name="${fieldName}"]`);
                if (field.value && !/^\d+:\d+$/.test(field.value)) {
                    field.classList.add('invalid-input');
                    isValid = false;
                }
            });
            
            if (!isValid) {
                alert('Bitte f√ºllen Sie alle Pflichtfelder korrekt aus.');
                return false;
            }
            
            return true;
        }

        function validateScoutingForm(form) {
            const requiredFields = form.querySelectorAll('[required]');
            let isValid = true;
            
            requiredFields.forEach(field => {
                if (!field.value || (field.type === 'radio' && !form.querySelector(`input[name="${field.name}"]:checked`))) {
                    field.classList.add('invalid-input');
                    isValid = false;
                } else {
                    field.classList.remove('invalid-input');
                }
            });
            
            // Validate score format
            const scoreFields = ['halftime', 'fulltime'];
            scoreFields.forEach(fieldName => {
                const field = form.querySelector(`input[name="${fieldName}"]`);
                if (field.value && !/^\d+:\d+$/.test(field.value)) {
                    field.classList.add('invalid-input');
                    isValid = false;
                }
            });

            // Check if at least one recommendation is selected
            const recommendations = form.querySelectorAll('input[type="checkbox"][name^="recommendation_"]:checked');
            if (recommendations.length === 0) {
                alert('Bitte w√§hlen Sie eine Empfehlung f√ºr die Gesamtleistung aus.');
                isValid = false;
            }
            
            if (!isValid) {
                alert('Bitte f√ºllen Sie alle Pflichtfelder korrekt aus.');
                return false;
            }
            
            return true;
        }

        function collectBeobachtungsFormData(form) {
            const formData = new FormData(form);
            const data = {};
            
            // Add basic information
            for (let [key, value] of formData.entries()) {
                data[key] = value;
            }
            
            // Add criteria scores
            const criteriaRadios = document.querySelectorAll('#beobachtungsForm input[type="radio"][name^="criteria_"]:checked');
            criteriaRadios.forEach(radio => {
                data[radio.name] = radio.value;
            });
            
            // Add calculated scores
            data.summary = {
                count1: document.getElementById('count1').textContent,
                count2: document.getElementById('count2').textContent,
                count3: document.getElementById('count3').textContent,
                points1: document.getElementById('points1').textContent,
                points2: document.getElementById('points2').textContent,
                points3: document.getElementById('points3').textContent,
                totalPoints: document.getElementById('totalPoints').textContent.replace(/[<>/strong]/g, '')
            };
            
            return data;
        }

        function collectScoutingFormData(form) {
            const formData = new FormData(form);
            const data = {};
            
            // Add basic information
            for (let [key, value] of formData.entries()) {
                data[key] = value;
            }
            
            // Add criteria scores
            const criteriaRadios = document.querySelectorAll('#scoutingForm input[type="radio"][name^="scout_criteria_"]:checked');
            criteriaRadios.forEach(radio => {
                data[radio.name] = radio.value;
            });

            // Add recommendations
            const recommendations = document.querySelectorAll('#scoutingForm input[type="checkbox"][name^="recommendation_"]:checked');
            data.recommendations = [];
            recommendations.forEach(rec => {
                data.recommendations.push(rec.value);
            });
            
            return data;
        }

        function generateBeobachtungsPDF(data) {
            const criteriaLabels = {
                'criteria_1_1': '1.1 Erkennen des Spielcharakters / von Spielphasen',
                'criteria_1_2': '1.2 Regelkonformit√§t / Regelverst√∂√üe',
                'criteria_2_1': '2.1 Fu√üvergehen',
                'criteria_2_2': '2.2 Oberk√∂rpervergehen',
                'criteria_3_1': '3.1 Ansprachen / Ermahnungen',
                'criteria_3_2': '3.2 Verwarnungen',
                'criteria_3_3': '3.3 Feldverweise',
                'criteria_4_1': '4.1 Akzeptanz / Pers√∂nlichkeit',
                'criteria_4_2': '4.2 Durchsetzungsverm√∂gen',
                'criteria_4_3': '4.3 Kommunikation (Ansprache, Dialog)',
                'criteria_4_4': '4.4 Pr√§sentation (Gestik, Mimik, Pfiffe)',
                'criteria_5_1': '5.1 Laufverm√∂gen',
                'criteria_5_2': '5.2 Einblick und Positionierung laufendes Spiel',
                'criteria_5_3': '5.3 Einblick und Positionierung Spielfortsetzungen',
                'criteria_6_1': '6.1 Zusammenarbeit'
            };

            let content = `FVN - Schiedsrichter Beobachtungsbogen
A- und B-Junioren-Niederrheinliga

=== INFORMATIONEN ZUR BEOBACHTUNG ===
Beobachter: ${data.observer || ''}
Datum: ${data.date || ''}
Begegnung: ${data.match || ''}
Spielklasse: ${data.league || ''}
Schiedsrichter: ${data.referee || ''}
Halbzeitstand: ${data.halftime || ''}
Schiedsrichterassistent 1: ${data.assistant1 || ''}
Endstand: ${data.fulltime || ''}
Schiedsrichterassistent 2: ${data.assistant2 || ''}
Kader: ${data.squad || ''}

=== BEWERTUNGSKRITERIEN ===
`;

            Object.keys(criteriaLabels).forEach(key => {
                if (data[key]) {
                    content += `${criteriaLabels[key]}: ${data[key]}\n`;
                }
            });

            content += `
=== KURZES FAZIT ZUR SCHIEDSRICHTERLEISTUNG ===
Positive Erkenntnisse:
${data.positive_notes || 'Keine Angaben'}

Zu optimierende Bereiche:
${data.improvement_notes || 'Keine Angaben'}

=== BEURTEILUNG DER GESAMTLEISTUNG ===
Empfehlung:
`;


            if (data.recommendations && data.recommendations.length > 0) {
                data.recommendations.forEach(rec => {
                    content += `- ${recommendationLabels[rec] || rec}\n`;
                });
            } else {
                content += 'Keine Empfehlung ausgew√§hlt\n';
            }

            content += `
Erstellt am: ${new Date().toLocaleDateString('de-DE')} um ${new Date().toLocaleTimeString('de-DE')}
`;

            return content;
        }

        function downloadPDFContent(content, formType, date, referee) {
            const blob = new Blob([content], { type: 'text/plain;charset=utf-8' });
            const url = window.URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            
            const cleanReferee = referee ? referee.replace(/\s+/g, '_') : 'unbekannt';
            const cleanDate = date || 'unbekannt';
            a.download = `${formType}_${cleanDate}_${cleanReferee}.txt`;
            
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
            window.URL.revokeObjectURL(url);
        }

        // Initialize the application
        document.addEventListener('DOMContentLoaded', function() {
            showSelection();
        });
        
    </script>
</body>
</html> 